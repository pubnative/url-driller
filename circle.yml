machine:
  timezone:
    Europe/Berlin
  environment:
    GRADLE_OPTS: '-Dorg.gradle.jvmargs="-Xmx2048m -XX:MaxPermSize=1024m -Xms512m -XX:+HeapDumpOnOutOfMemoryError"'
  java:
    version: oraclejdk8

dependencies:
  pre:
    - if ! $(grep -q "Revision=39.0.0" $ANDROID_HOME/extras/android/m2repository); then echo y | android update sdk --no-ui --all --filter extra-android-m2repository ; fi
    - if ! $(grep -q "Revision=23.2.1" $ANDROID_HOME/extras/android/support); then echo y | android update sdk --no-ui --all --filter extra-android-support ; fi
    - if ! $(grep -q "Revision=33" $ANDROID_HOME/extras/google/google_play_services); then echo y | android update sdk --no-ui --all --filter extra-google-google_play_services ; fi
    - if ! $(grep -q "Revision=36" $ANDROID_HOME/extras/google/m2repository); then echo y | android update sdk --no-ui --all --filter extra-google-m2repository ; fi
    - if [ ! -e $ANDROID_HOME/build-tools/25.0.0 ]; then echo y | android update sdk --no-ui --all --filter build-tools-25.0.0 ; fi
  cache_directories:
    - /usr/local/android-sdk-linux/tools
    - /usr/local/android-sdk-linux/extras
    - /usr/local/android-sdk-linux/build-tools/25.0.0

test:
  override:
    - ./gradlew clean testDebug